admin.controller("modifyVideoController",["$scope","$http","$window","$location","$filter","Url","$sce",function(n,t,i,r,u,f,e){function o(){n.video.id!==null?h(n.video.id):s()}function s(){n.video={published:!0}}function h(){t.get(apiVideo+"/"+n.video.id).then(function(t){n.video.link1=n.video.link;n.video=t.data;n.video.link1=e.trustAsResourceUrl(t.data.link)},function(){i.location.href="/Admin/Video"})}apiVideo="/API/VideoAPI";n.video={};n.statuses=[{text:"Xuất bản",value:!0},{text:"Không xuất bản",value:!1}];n.video.id=f.getParameterByName("idVideo");o();n.Save=function(){n.video.id==null?t.post(apiVideo,n.video).then(function(t){t.status==201?(n.video=angular.copy(t.data),toastr.success("Thành công","Thêm video"),i.location.href="/Admin/Video/Modify?idVideo="+n.video.id):toastr.error("Thất bại","Thêm video")},function(){toastr.error("Thất bại","Thêm video")}):t.put(apiVideo+"/"+n.video.id,n.video).then(function(n){n.status==204?toastr.success("Thành công","Lưu video"):toastr.error("Thất bại","Lưu video")},function(){toastr.error("Thất bại","Lưu video")})};n.SaveAndExit=function(){n.video.id==null?t.post(apiVideo,n.video).then(function(t){t.status==201?(n.video=angular.copy(t.data),toastr.success("Thành công","Thêm video"),i.location.href="/Admin/Video"):toastr.error("Thất bại","Thêm video")},function(){toastr.error("Thất bại","Thêm video")}):t.put(apiVideo+"/"+n.video.id,n.video).then(function(n){n.status==204?(toastr.success("Thành công","Lưu video"),i.location.href="/Admin/Video"):toastr.error("Thất bại","Lưu video")},function(){toastr.error("Thất bại","Lưu video")})};n.SaveAndAdd=function(){n.video.id==null?t.post(apiVideo,n.video).then(function(t){t.status==201?(n.video=angular.copy(t.data),toastr.success("Thành công","Thêm video"),i.location.href="/Admin/Video/Modify"):toastr.error("Thất bại","Thêm video")},function(){toastr.error("Thất bại","Thêm video")}):t.put(apiVideo+"/"+n.video.id,n.video).then(function(n){n.status==204?(toastr.success("Thành công","Lưu video"),i.location.href="/Admin/Video/Modify"):toastr.error("Thất bại","Lưu video")},function(){toastr.error("Thất bại","Lưu video")})};n.Cancel=function(){i.location.href="/Admin/Video"};n.GetVideoNotID=function(){n.video.link1=e.trustAsResourceUrl(n.video.link)};n.ChooseImageVideo=function(){var t=new CKFinder;t.selectActionFunction=function(t){n.video.image=t;n.$apply()};t.SelectFunction="ShowFileInfo";t.popup()}}]);