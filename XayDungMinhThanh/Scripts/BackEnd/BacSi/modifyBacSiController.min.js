admin.controller("modifyBacSiController",["$scope","$http","$window","$location","$filter","Alias","Url",function(n,t,i,r,u,f,e){function o(){n.bacSi.id!==null?h(n.bacSi.id):s()}function s(){n.bacSi={featured:1}}function h(){t.get(apiBacSi+"/"+n.bacSi.id).then(function(t){t.status==200?n.bacSi=angular.copy(t.data):i.location.href="/Admin/BacSi"},function(){i.location.href="/Admin/BacSi"})}apiBacSi="/API/BacSiAPI";n.bacSi={};n.statuses=[{text:"Xuất bản",value:!0},{text:"Không xuất bản",value:!1}];n.bacSi.id=e.getParameterByName("idBacSi");o();n.Save=function(){n.bacSi.id==null?t.post(apiBacSi,n.bacSi).then(function(t){n.bacSi=angular.copy(t.data);toastr.success("Thành công","Thêm bacSi");i.location.href="/Admin/BacSi/Modify?idBacSi="+n.bacSi.id},function(){toastr.error("Thất bại","Thêm bacSi")}):t.put(apiBacSi+"/"+n.bacSi.id,n.bacSi).then(function(){toastr.success("Thành công","Lưu bacSi")},function(){toastr.error("Thất bại","Lưu bacSi")})};n.SaveAndExit=function(){n.bacSi.id==null?t.post(apiBacSi,n.bacSi).then(function(t){n.bacSi=angular.copy(t.data);toastr.success("Thành công","Thêm bacSi");i.location.href="/Admin/BacSi"},function(){toastr.error("Thất bại","Thêm bacSi")}):t.put(apiBacSi+"/"+n.bacSi.id,n.bacSi).then(function(){toastr.success("Thành công","Lưu bacSi");i.location.href="/Admin/BacSi"},function(){toastr.error("Thất bại","Lưu bacSi")})};n.SaveAndAdd=function(){n.bacSi.id==null?t.post(apiBacSi,n.bacSi).then(function(t){t.status==201?(n.bacSi=angular.copy(t.data),toastr.success("Thành công","Thêm bacSi"),i.location.href="/Admin/BacSi/Modify"):toastr.error("Thất bại","Thêm bacSi")},function(){toastr.error("Thất bại","Thêm bacSi")}):t.put(apiBacSi+"/"+n.bacSi.id,n.bacSi).then(function(n){n.status==204?(toastr.success("Thành công","Lưu bacSi"),i.location.href="/Admin/BacSi/Modify"):toastr.error("Thất bại","Lưu bacSi")},function(){toastr.error("Thất bại","Lưu bacSi")})};n.Cancel=function(){i.location.href="/Admin/BacSi"};n.ChooseImageBacSi=function(){var t=new CKFinder;t.selectActionFunction=function(t){n.bacSi.image=t;n.$apply()};t.SelectFunction="ShowFileInfo";t.popup()};n.GenAlias=function(){n.bacSi.alias=f.genAlias(n.bacSi.hoTen);console.log(n.bacSi.hoTen)}}]);