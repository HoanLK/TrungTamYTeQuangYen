/*
 Sexy LightBox - for jQuery 1.3.2
 @name      sexylightbox.v2.3.js
 @author    Eduardo D. Sada - http://www.coders.me/web-html-js-css/javascript/sexy-lightbox-2
 @version   2.3.4
 @date      10-Nov-2009
 @copyright (c) 2009 Eduardo D. Sada (www.coders.me)
 @license   MIT - http://es.wikipedia.org/wiki/Licencia_MIT
 @example   http://www.coders.me/ejemplos/sexy-lightbox-2/
*/
if("undefined"==typeof __jQuery__)var __jQuery__=jQuery;(function(n){n.bind=function(n,t){var i=Array.prototype.slice.call(arguments,2);return function(){var r=[this].concat(i,jQuery.makeArray(arguments));return t.apply(n,r)}};SexyLightbox={getOptions:function(){return{name:"SLB",zIndex:32e3,color:"black",find:"sexylightbox",dir:"css",emergefrom:"top",background:"bgSexy.png",backgroundIE:"bgSexy.gif",buttons:"buttons.png",displayed:0,showDuration:200,closeDuration:400,moveDuration:1e3,moveEffect:"easeInOutBack",resizeDuration:1e3,resizeEffect:"easeInOutBack",shake:{distance:10,duration:100,transition:"easeInOutBack",loops:2},BoxStyles:{width:486,height:320},Skin:{white:{hexcolor:"#FFFFFF",captionColor:"#000000","background-color":"#000000",opacity:.6},black:{hexcolor:"#000000",captionColor:"#FFFFFF","background-color":"#000000",opacity:.6},blanco:{hexcolor:"#FFFFFF",captionColor:"#000000","background-color":"#000000",opacity:.6},negro:{hexcolor:"#000000",captionColor:"#FFFFFF","background-color":"#000000",opacity:.6}}}},overlay:{create:function(t){this.options=t;this.element=n('<div id="'+(new Date).getTime()+'"><\/div>');this.element.css(n.extend({},{position:"absolute",top:0,left:0,opacity:0,display:"none","z-index":this.options.zIndex},this.options.style));this.element.bind("click",n.bind(this,function(n,t){this.options.hideOnClick&&(this.options.callback?this.options.callback():this.hide());t.preventDefault()}));this.hidden=!0;this.inject()},inject:function(){var t,i;this.target=n(document.body);this.target.append(this.element);n.browser.msie&&"6.0"==n.browser.version&&(t=parseInt(this.element.css("zIndex")),t||(t=1,i=this.element.css("position"),"static"!=i&&i||this.element.css({position:"relative"}),this.element.css({zIndex:t})),t=(this.options.zIndex||0===this.options.zIndex)&&t>this.options.zIndex?this.options.zIndex:t-1,0>t&&(t=1),this.shim=n('<iframe id="IF_'+(new Date).getTime()+'" scrolling="no" frameborder=0 src=""><\/div>'),this.shim.css({zIndex:t,position:"absolute",top:0,left:0,border:"none",opacity:0}),this.shim.insertAfter(this.element))},resize:function(t,i){this.element.css({height:0,width:0});this.shim&&this.shim.css({height:0,width:0});var r=n(document).width(),u=n(document).height(),r=n.browser.safari?r-25<document.body.clientWidth?document.body.clientWidth:r:r;return this.element.css({width:t?t:r,height:i?i:u}),this.shim&&(this.shim.css({height:0,width:0}),this.shim.css({width:t?t:r,height:i?i:u})),this},show:function(){return this.hidden?(this.transition&&this.transition.stop(),this.target.bind("resize",n.bind(this,this.resize)),this.resize(),this.shim&&this.shim.css({display:"block"}),this.hidden=!1,this.transition=this.element.fadeIn(this.options.showDuration,n.bind(this,function(){this.element.trigger("show")})),this):this},hide:function(){return this.hidden?this:(this.transition&&this.transition.stop(),this.target.unbind("resize"),this.shim&&this.shim.css({display:"none"}),this.hidden=!0,this.transition=this.element.fadeOut(this.options.closeDuration,n.bind(this,function(){this.element.trigger("hide");this.element.css({height:0,width:0})})),this)}},backwardcompatibility:function(t){this.options.dir=t.imagesdir||t.path||t.folder||t.dir;this.options.OverlayStyles=n.extend(this.options.Skin[this.options.color],this.options.OverlayStyles||{})},preloadimage:function(n){img=new Image;img.src=n},initialize:function(t){this.options=n.extend(this.getOptions(),t);this.backwardcompatibility(this.options);t=this.options.dir+"/"+this.options.color+"/"+(void 0==window.XMLHttpRequest&&void 0!=ActiveXObject?this.options.backgroundIE:this.options.background);var i=this.options.name;this.preloadimage(t);this.preloadimage(this.options.dir+"/"+this.options.color+"/"+this.options.buttons);this.overlay.create({style:this.options.Skin[this.options.color],hideOnClick:!0,zIndex:this.options.zIndex-1,callback:n.bind(this,this.close),showDuration:this.options.showDuration,showEffect:this.options.showEffect,closeDuration:this.options.closeDuration,closeEffect:this.options.closeEffect});this.lightbox={};n("body").append('<div id="'+i+'-Wrapper"><div id="'+i+'-Background"><\/div><div id="'+i+'-Contenedor"><div id="'+i+'-Top" style="background-image: url('+t+')"><a id="'+i+'-CloseButton" href="#">&nbsp;<\/a><div id="'+i+'-TopLeft" style="background-image: url('+t+')"><\/div><\/div><div id="'+i+'-Contenido"><\/div><div id="'+i+'-Bottom" style="background-image: url('+t+')"><div id="'+i+'-BottomRight" style="background-image: url('+t+')"><div id="'+i+'-Navegador"><strong id="'+i+'-Caption"><\/strong><\/div><\/div><\/div><\/div><\/div>');this.Wrapper=n("#"+i+"-Wrapper");this.Background=n("#"+i+"-Background");this.Contenedor=n("#"+i+"-Contenedor");this.Top=n("#"+i+"-Top");this.CloseButton=n("#"+i+"-CloseButton");this.Contenido=n("#"+i+"-Contenido");this.bb=n("#"+i+"-Bottom");this.innerbb=n("#"+i+"-BottomRight");this.Nav=n("#"+i+"-Navegador");this.Descripcion=n("#"+i+"-Caption");this.Wrapper.css({"z-index":this.options.zIndex,display:"none"}).hide();this.Background.css({"z-index":this.options.zIndex+1});this.Contenedor.css({position:"absolute",width:this.options.BoxStyles.width,"z-index":this.options.zIndex+2});this.Contenido.css({height:this.options.BoxStyles.height,"border-left-color":this.options.Skin[this.options.color].hexcolor,"border-right-color":this.options.Skin[this.options.color].hexcolor});this.CloseButton.css({"background-image":"url("+this.options.dir+"/"+this.options.color+"/"+this.options.buttons+")"});this.Nav.css({color:this.options.Skin[this.options.color].captionColor});this.Descripcion.css({color:this.options.Skin[this.options.color].captionColor});this.CloseButton.bind("click",n.bind(this,function(){return this.close(),!1}));n(document).bind("keydown",n.bind(this,function(n,t){1==this.options.displayed&&(27==t.keyCode&&this.close(),37==t.keyCode&&this.prev&&this.prev.trigger("click",t),39==t.keyCode&&this.next&&this.next.trigger("click",t))}));n(window).bind("resize",n.bind(this,function(){1==this.options.displayed&&(this.replaceBox(),this.overlay.resize())}));n(window).bind("scroll",n.bind(this,function(){1==this.options.displayed&&this.replaceBox()}));this.refresh()},hook:function(t){t=n(t);t.blur();this.show(t.attr("title")||t.attr("name")||"",t.attr("href"),t.attr("rel")||!1)},close:function(){this.animate(0)},refresh:function(){var t=this;this.anchors=[];n("a, area").each(function(){n(this).attr("rel")&&RegExp("^"+t.options.find).test(n(this).attr("rel"))&&(n(this).click(function(n){n.preventDefault();t.hook(this)}),n(this).attr("id")==t.options.name+"-Left"||n(this).attr("id")==t.options.name+"-Right"||t.anchors.push(this))})},animate:function(t){0==this.options.displayed&&0!=t||1==t?(this.overlay.show(),this.options.displayed=1,this.Wrapper.css({display:"block"})):(this.Wrapper.css({display:"none",top:-(this.options.BoxStyles.height+280)}).hide(),this.overlay.hide(),this.overlay.element.bind("hide",n.bind(this,function(){this.options.displayed&&(this.Image&&this.Image.remove(),this.options.displayed=0)})))},replaceBox:function(t){var u=n(window).width(),f=n(window).height(),e=n(window).scrollLeft(),i=n(window).scrollTop(),o=this.options.BoxStyles.width,s=this.options.BoxStyles.height,r;0==this.options.displayed&&(r=0,r="bottom"==this.options.emergefrom?i+f+80:i-s-80,this.Wrapper.css({display:"none",top:r,left:e+(u-o)/2}),this.Contenedor.css({width:o}),this.Contenido.css({height:s-80}));t=n.extend({},{width:this.lightbox.width,height:this.lightbox.height,resize:0},t);this.MoveBox&&this.MoveBox.stop();this.MoveBox=this.Wrapper.animate({left:e+(u-t.width)/2,top:i+(f-(t.height+(this.navigator?80:48)))/2},{duration:this.options.moveDuration,easing:this.options.moveEffect});t.resize&&(this.ResizeBox2&&this.ResizeBox2.stop(),this.ResizeBox2=this.Contenido.animate({height:t.height},{duration:this.options.resizeDuration,easing:this.options.resizeEffect}),this.ResizeBox&&this.ResizeBox.stop(),this.ResizeBox=this.Contenedor.animate({width:t.width},{duration:this.options.resizeDuration,easing:this.options.resizeEffect,complete:function(){n(this).trigger("complete")}}))},getInfo:function(t,i){return t=n(t),IEuta=n('<a id="'+this.options.name+"-"+i+'" rel="'+t.attr("rel")+'">&nbsp;<\/a>'),IEuta.css({"background-image":"url("+this.options.dir+"/"+this.options.color+"/"+this.options.buttons+")"}),IEuta.attr("title",t.attr("title")),IEuta.attr("href",t.attr("href")),IEuta},display:function(n,t,i){return this.show(t,n,"",i)},show:function(t,i,r,u){var f,s;this.showLoading();var l=i.match(/(.+)?/)[1]||i,e=i.match(/\?(.+)/);if(e&&(e=e[1]),f=this.parseQuery(e),this.ResizeBox&&this.ResizeBox.unbind("complete"),f=n.extend({},{width:0,height:0,modal:0,background:"",title:t},f||{}),f.width=parseInt(f.width),f.height=parseInt(f.height),f.modal=parseInt(f.modal),this.overlay.options.hideOnClick=!f.modal,this.lightbox=n.extend({},f,{width:f.width+14}),this.navigator=this.lightbox.title?!0:!1,"image"==u||l.match(/\.(jpe?g|png|gif|bmp)/gi)?(this.img=new Image,this.img.onload=n.bind(this,function(){if(this.img.onload=function(){},!f.width){var t=this.calculate(this.img.width,this.img.height);f.width=t.x;f.height=t.y;this.lightbox.width=f.width+14}this.lightbox.height=f.height-(this.navigator?21:35);this.replaceBox({resize:1});this.ResizeBox.bind("complete",n.bind(this,function(){this.showImage(this.img.src,f)}))}),this.img.onerror=n.bind(this,function(){this.show("",this.options.imagesdir+"/"+this.options.color+"/404.png",this.options.find)}),this.img.src=i):(this.lightbox.height=f.height+(n.browser.opera?2:0),this.replaceBox({resize:1}),-1!=i.indexOf("TB_inline"))?this.ResizeBox.bind("complete",n.bind(this,function(){this.showContent(n("#"+f.inlineId).html(),this.lightbox)})):-1!=i.indexOf("TB_iframe")?(s=i.split("TB_"),this.ResizeBox.bind("complete",n.bind(this,function(){this.showIframe(s[0],this.lightbox)}))):this.ResizeBox.bind("complete",n.bind(this,function(){n.ajax({url:i,type:"GET",cache:!1,error:n.bind(this,function(){this.show("",this.options.imagesdir+"/"+this.options.color+"/404html.png",this.options.find)}),success:n.bind(this,this.handlerFunc)})})),this.prev=this.next=!1,r.length>this.options.find.length){this.navigator=!0;var h=!1,c=!1,o=this;n.each(this.anchors,function(){n(this).attr("rel")!=r||c||(n(this).attr("href")==i?h=!0:h?(o.next=o.getInfo(this,"Right"),c=!0):o.prev=o.getInfo(this,"Left"))})}this.addButtons();this.showNavBar(t);this.animate(1)},calculate:function(t,i){var r=n(window).width()-100,u=n(window).height()-100;return t>r?(i*=r/t,t=r,i>u&&(t*=u/i,i=u)):i>u&&(t*=u/i,i=u,t>r&&(i*=r/t,t=r)),{x:parseInt(t),y:parseInt(i)}},handlerFunc:function(n,t){this.showContent(t,this.lightbox)},addButtons:function(){this.prev&&this.prev.bind("click",n.bind(this,function(n,t){t.preventDefault();this.hook(this.prev)}));this.next&&this.next.bind("click",n.bind(this,function(n,t){t.preventDefault();this.hook(this.next)}))},showNavBar:function(){this.navigator?(this.bb.addClass("SLB-bbnav"),this.Nav.empty(),this.innerbb.empty(),this.innerbb.append(this.Nav),this.Descripcion.html(this.lightbox.title),this.Nav.append(this.prev),this.Nav.append(this.next),this.Nav.append(this.Descripcion)):(this.bb.removeClass("SLB-bbnav"),this.innerbb.empty())},showImage:function(t,i){this.Background.empty().removeAttr("style").append('<img id="'+this.options.name+'-Image"/>');this.Image=n("#"+this.options.name+"-Image").attr({src:t,width:i.width,height:i.height}).css({width:i.width,height:i.height});this.Contenedor.css({background:"none"});this.Contenido.empty().css({"background-color":"transparent",padding:"0px",width:"auto"})},showContent:function(t,i){this.Background.empty().css({width:i.width-14,height:i.height+35,"background-color":i.background||"#ffffff"});this.Contenido.empty().css({width:i.width-14,"background-color":i.background||"#ffffff"}).append('<div id="'+this.options.name+'-Image"/>');this.Image=n("#"+this.options.name+"-Image");this.Image.css({width:i.width-14,height:i.height,overflow:"auto",background:i.height||"#ffffff"}).append(t);this.Contenedor.css({background:"none"})},showIframe:function(t,i,r){this.Background.empty().css({width:i.width-14,height:i.height+35,"background-color":i.background||"#ffffff"});r="if_"+(new Date).getTime()+"-Image";this.Contenido.empty().css({width:i.width-14,"background-color":i.background||"#ffffff",padding:"0px"}).append('<iframe id="'+r+'" frameborder="0"><\/iframe>');this.Image=n("#"+r);this.Image.css({width:i.width-14,height:i.height,background:i.background||"#ffffff"}).attr("src",t);this.Contenedor.css({background:"none"})},showLoading:function(){this.Background.empty().removeAttr("style").css({width:"auto",height:"auto"});this.Contenido.empty().css({"background-color":"transparent",padding:"0px",width:"auto"});this.Contenedor.css({background:"url("+this.options.imagesdir+"/"+this.options.color+"/loading.gif) no-repeat 50% 50%"});this.Contenido.empty().css({"background-color":"transparent",padding:"0px",width:"auto"});this.replaceBox(n.extend(this.options.BoxStyles,{resize:1}))},parseQuery:function(n){var r,i,t;if(!n)return{};for(r={},n=n.split(/[;&]/),i=0;i<n.length;i++)t=n[i].split("="),t&&2==t.length&&(r[unescape(t[0])]=unescape(t[1]).replace(/\+/g," "));return r},shake:function(){var t=this.options.shake.distance,n=this.Wrapper.position(),n=n.left;for(x=0;x<this.options.shake.loops;x++)this.Wrapper.animate({left:n+t},this.options.shake.duration,this.options.shake.transition).animate({left:n-t},this.options.shake.duration,this.options.shake.transition);this.Wrapper.animate({left:n+t},this.options.shake.duration,this.options.shake.transition).animate({left:n},this.options.shake.duration,this.options.shake.transition)}}})(__jQuery__);