admin.controller("modifyBannerController",["$scope","$http","$window","$location","$filter","Url",function(n,t,i,r,u,f){function e(){n.banner.id!==null?s(n.banner.id):o()}function o(){n.banner={published:!0}}function s(){t.get(apiBanner+"/"+n.banner.id).then(function(t){t.status==200?n.banner=angular.copy(t.data):i.location.href="/Admin/Banner"},function(){i.location.href="/Admin/Banner"})}apiBanner="/API/BannerAPI";n.banner={};n.statuses=[{text:"Xuất bản",value:!0},{text:"Không xuất bản",value:!1}];n.banner.id=f.getParameterByName("idBanner");e();n.Save=function(){n.banner.id==null?t.post(apiBanner,n.banner).then(function(t){t.status==201?(n.banner=angular.copy(t.data),toastr.success("Thành công","Thêm banner"),i.location.href="/Admin/Banner/Modify?idBanner="+n.banner.id):toastr.error("Thất bại","Thêm banner")},function(){toastr.error("Thất bại","Thêm banner")}):t.put(apiBanner+"/"+n.banner.id,n.banner).then(function(n){n.status==204?toastr.success("Thành công","Lưu banner"):toastr.error("Thất bại","Lưu banner")},function(){toastr.error("Thất bại","Lưu banner")})};n.SaveAndExit=function(){n.banner.id==null?t.post(apiBanner,n.banner).then(function(t){t.status==201?(n.banner=angular.copy(t.data),toastr.success("Thành công","Thêm banner"),i.location.href="/Admin/Banner"):toastr.error("Thất bại","Thêm banner")},function(){toastr.error("Thất bại","Thêm banner")}):t.put(apiBanner+"/"+n.banner.id,n.banner).then(function(n){n.status==204?(toastr.success("Thành công","Lưu banner"),i.location.href="/Admin/Banner"):toastr.error("Thất bại","Lưu banner")},function(){toastr.error("Thất bại","Lưu banner")})};n.SaveAndAdd=function(){n.banner.id==null?t.post(apiBanner,n.banner).then(function(t){t.status==201?(n.banner=angular.copy(t.data),toastr.success("Thành công","Thêm banner"),i.location.href="/Admin/Banner/Modify"):toastr.error("Thất bại","Thêm banner")},function(){toastr.error("Thất bại","Thêm banner")}):t.put(apiBanner+"/"+n.banner.id,n.banner).then(function(n){n.status==204?(toastr.success("Thành công","Lưu banner"),i.location.href="/Admin/Banner/Modify"):toastr.error("Thất bại","Lưu banner")},function(){toastr.error("Thất bại","Lưu banner")})};n.Cancel=function(){i.location.href="/Admin/Banner"};n.ChooseImageBanner=function(){var t=new CKFinder;t.selectActionFunction=function(t){n.banner.image=t;n.$apply()};t.SelectFunction="ShowFileInfo";t.popup()}}]);