admin.controller("modifyGiaDVController",["$scope","$http","$window","$location","$filter","Alias","Url",function(n,t,i,r,u,f,e){function o(){n.GiaDV.ID!==null?h(n.GiaDV.ID):s()}function s(){n.GiaDV={featured:1}}function h(){t.get(apiGiaDV+"/"+n.GiaDV.ID).then(function(t){t.status==200?n.GiaDV=angular.copy(t.data):i.location.href="/Admin/GiaDV"},function(){i.location.href="/Admin/GiaDV"})}apiGiaDV="/API/GiaDichVuAPI";n.GiaDV={};n.statuses=[{text:"Xuất bản",value:!0},{text:"Không xuất bản",value:!1}];n.GiaDV.ID=e.getParameterByName("IDGiaDV");o();n.Save=function(){n.GiaDV.ID==null?t.post(apiGiaDV,n.GiaDV).then(function(t){n.GiaDV=angular.copy(t.data);toastr.success("Thành công","Thêm GiaDV");i.location.href="/Admin/GiaDV/Modify?IDGiaDV="+n.GiaDV.ID},function(){toastr.error("Thất bại","Thêm GiaDV")}):t.put(apiGiaDV+"/"+n.GiaDV.ID,n.GiaDV).then(function(){toastr.success("Thành công","Lưu GiaDV")},function(){toastr.error("Thất bại","Lưu GiaDV")})};n.SaveAndExit=function(){n.GiaDV.ID==null?t.post(apiGiaDV,n.GiaDV).then(function(t){n.GiaDV=angular.copy(t.data);toastr.success("Thành công","Thêm GiaDV");i.location.href="/Admin/GiaDV"},function(){toastr.error("Thất bại","Thêm GiaDV")}):t.put(apiGiaDV+"/"+n.GiaDV.ID,n.GiaDV).then(function(){toastr.success("Thành công","Lưu GiaDV");i.location.href="/Admin/GiaDV"},function(){toastr.error("Thất bại","Lưu GiaDV")})};n.SaveAndAdd=function(){n.GiaDV.ID==null?t.post(apiGiaDV,n.GiaDV).then(function(t){t.status==201?(n.GiaDV=angular.copy(t.data),toastr.success("Thành công","Thêm GiaDV"),i.location.href="/Admin/GiaDV/Modify"):toastr.error("Thất bại","Thêm GiaDV")},function(){toastr.error("Thất bại","Thêm GiaDV")}):t.put(apiGiaDV+"/"+n.GiaDV.ID,n.GiaDV).then(function(n){n.status==204?(toastr.success("Thành công","Lưu GiaDV"),i.location.href="/Admin/GiaDV/Modify"):toastr.error("Thất bại","Lưu GiaDV")},function(){toastr.error("Thất bại","Lưu GiaDV")})};n.Cancel=function(){i.location.href="/Admin/GiaDV"};n.ChooseImageGiaDV=function(){var t=new CKFinder;t.selectActionFunction=function(t){n.GiaDV.image=t;n.$apply()};t.SelectFunction="ShowFileInfo";t.popup()};n.GenAlias=function(){n.GiaDV.alias=f.genAlias(n.GiaDV.hoTen);console.log(n.GiaDV.hoTen)}}]);