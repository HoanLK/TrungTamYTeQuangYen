admin.controller("modifyAccountController",["$scope","$http","$window","$location","$filter","Alias","Url",function(n,t,i,r,u,f,e){function o(){s();n.post.id!==null?c(n.post.id):h()}function s(){t.get("/CategoryPost/GetList").then(function(t){t.status==200&&(n.categoryPosts=angular.copy(t.data),console.log(n.categoryPosts))},function(){})}function h(){n.post={featured:!1,published:!0,version:1,robots:"Index, Follow",colorBackgroundBanner:"#000000",colorTitleBanner:"#ffffff",colorTextBanner:"#ffffff",timePublished:u("date")(new Date,"HH:mm:ss dd-MM-yyyy")}}function c(){t.get(apiPost+"/"+n.post.id).then(function(t){t.status==200?(n.post=angular.copy(t.data),n.post.timePublished=u("date")(n.post.timePublished,"HH:mm:ss dd-MM-yyyy")):i.location.href="/Admin/Post"},function(){i.location.href="/Admin/Post"})}apiPost="/API/PostAPI";n.post={};n.statuses=[{text:"Xuất bản",value:!0},{text:"Không xuất bản",value:!1}];n.featureds=[{text:"Có",value:!0},{text:"Không",value:!1}];n.categoryPosts=[];n.post.id=e.getParameterByName("idPost");o();n.Save=function(){n.post.id==null?t.post(apiPost,n.post).then(function(t){t.status==201?(n.post=angular.copy(t.data),toastr.success("Thành công","Thêm Bài viết"),i.location.href="/Admin/Post/Modify?idPost="+n.post.id):toastr.error("Thất bại","Thêm Bài viết")},function(){toastr.error("Thất bại","Thêm Bài viết")}):t.put(apiPost+"/"+n.post.id,n.post).then(function(n){n.status==204?toastr.success("Thành công","Lưu Bài viết"):toastr.error("Thất bại","Lưu Bài viết")},function(){toastr.error("Thất bại","Lưu Bài viết")})};n.SaveAndExit=function(){n.post.id==null?t.post(apiPost,n.post).then(function(t){t.status==201?(n.post=angular.copy(t.data),toastr.success("Thành công","Thêm Bài viết"),i.location.href="/Admin/Post"):toastr.error("Thất bại","Thêm Bài viết")},function(){toastr.error("Thất bại","Thêm Bài viết")}):t.put(apiPost+"/"+n.post.id,n.post).then(function(n){n.status==204?(toastr.success("Thành công","Lưu Bài viết"),i.location.href="/Admin/Post"):toastr.error("Thất bại","Lưu Bài viết")},function(){toastr.error("Thất bại","Lưu Bài viết")})};n.SaveAndAdd=function(){n.post.id==null?t.post(apiPost,n.post).then(function(t){t.status==201?(n.post=angular.copy(t.data),toastr.success("Thành công","Thêm Bài viết"),i.location.href="/Admin/Post/Modify"):toastr.error("Thất bại","Thêm Bài viết")},function(){toastr.error("Thất bại","Thêm Bài viết")}):t.put(apiPost+"/"+n.post.id,n.post).then(function(n){n.status==204?(toastr.success("Thành công","Lưu Bài viết"),i.location.href="/Admin/Post/Modify"):toastr.error("Thất bại","Lưu Bài viết")},function(){toastr.error("Thất bại","Lưu Bài viết")})};n.Cancel=function(){i.location.href="/Admin/Post"};n.ChooseImage=function(){var t=new CKFinder;t.selectActionFunction=function(t){n.post.image=t;n.$apply()};t.SelectFunction="ShowFileInfo";t.popup()};n.ChooseImageBanner=function(){var t=new CKFinder;t.selectActionFunction=function(t){n.post.imageBanner=t;n.$apply()};t.SelectFunction="ShowFileInfo";t.popup()};n.GenAlias=function(){n.post.alias=angular.copy(f.genAlias(n.post.title))}}]);