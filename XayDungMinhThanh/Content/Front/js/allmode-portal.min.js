(function(n){n.fn.pajinate=function(t){function f(n){var i=u.data(h);start_from=n*i;end_on=start_from+i;s.fadeOut(250,function(){e.hide();e.slice(start_from,end_on).show();s.fadeIn(500)});r.find(t.nav_panel_id).children(".page_link[longdesc="+n+"]").addClass("active_page").siblings(".active_page").removeClass("active_page");u.data(o,n);a()}function c(r,u){n(r).siblings(".active_page").siblings(".page_link[longdesc="+u+"]").css("display")=="none"&&i.each(function(){n(this).children(".page_link").hide().slice(parseInt(u-t.num_page_links_to_display+1),u+1).show()})}function l(r,u){n(r).siblings(".active_page").siblings(".page_link[longdesc="+u+"]").css("display")=="none"&&i.each(function(){n(this).children(".page_link").hide().slice(u,u+parseInt(t.num_page_links_to_display)).show()})}function a(){i.children(".page_link:visible").hasClass("last")?i.children(".more").hide():i.children(".more").show();i.children(".page_link:visible").hasClass("first")?i.children(".less").hide():i.children(".less").show()}var o="current_page",h="items_per_page",u,s,r,e,i;return t=n.extend({item_container_id:".allmode_items",items_per_page:5,nav_panel_id:".allmode_pagenav",num_page_links_to_display:10,start_page:0,nav_label_first:"&laquo;",nav_label_prev:"Prev",nav_label_next:"Next",nav_label_last:"&raquo;"},t),this.each(function(){var p,v,y,w;for(r=n(this),s=n(this).find(t.item_container_id),e=r.find(t.item_container_id).children(),u=r,u.data(o,0),u.data(h,t.items_per_page),p=s.children().size(),p=Math.ceil(p/t.items_per_page),v='<a class="first_link" href="">'+t.nav_label_first+"<\/a>",v+='<a class="previous_link" href="">'+t.nav_label_prev+'<\/a><span class="ellipse less">...<\/span>',y=0;p>y;)v+='<a class="page_link" href="" longdesc="'+y+'">'+(y+1)+"<\/a>",y++;v+='<span class="ellipse more">...<\/span><a class="next_link" href="">'+t.nav_label_next+"<\/a>";v+='<a class="last_link" href="">'+t.nav_label_last+"<\/a>";i=r.find(t.nav_panel_id);i.html(v).each(function(){n(this).find(".page_link:first").addClass("first");n(this).find(".page_link:last").addClass("last")});i.children(".ellipse").hide();i.find(".previous_link").next().next().addClass("active_page");e.hide();e.slice(0,u.data(h)).show();w=r.children(t.nav_panel_id+":first").children(".page_link").size();t.num_page_links_to_display=Math.min(t.num_page_links_to_display,w);i.children(".page_link").hide();i.each(function(){n(this).children(".page_link").slice(0,t.num_page_links_to_display).show()});r.find(".first_link").click(function(t){t.preventDefault();l(n(this),0);f(0)});r.find(".last_link").click(function(t){t.preventDefault();t=w-1;c(n(this),t);f(t)});r.find(".previous_link").click(function(t){t.preventDefault();t=n(this);new_page=parseInt(u.data(o))-1;n(t).siblings(".active_page").prev(".page_link").length==!0&&(l(t,new_page),f(new_page))});r.find(".next_link").click(function(t){t.preventDefault();t=n(this);new_page=parseInt(u.data(o))+1;n(t).siblings(".active_page").next(".page_link").length==!0&&(c(t,new_page),f(new_page))});r.find(".page_link").click(function(t){t.preventDefault();f(n(this).attr("longdesc"))});a()})}})(jQuery);