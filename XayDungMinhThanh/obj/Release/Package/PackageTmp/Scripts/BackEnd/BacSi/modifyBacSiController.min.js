admin.controller("modifyGiaDVController",["$scope","$http","$window","$location","$filter","Alias","Url",function(n,t,i,r,u,f,e){function o(){n.bacSi.id!==null?h(n.bacSi.id):s()}function s(){n.bacSi={featured:1}}function h(){t.get(apiGiaDV+"/"+n.bacSi.id).then(function(t){t.status==200?n.bacSi=angular.copy(t.data):i.location.href="/Admin/GiaDV"},function(){i.location.href="/Admin/GiaDV"})}apiGiaDV="/API/GiaDichVuAPI";n.bacSi={};n.statuses=[{text:"Xuất bản",value:!0},{text:"Không xuất bản",value:!1}];n.bacSi.id=e.getParameterByName("idGiaDV");o();n.Save=function(){n.bacSi.id==null?t.post(apiGiaDV,n.bacSi).then(function(t){n.bacSi=angular.copy(t.data);toastr.success("Thành công","Thêm bacSi");i.location.href="/Admin/GiaDV/Modify?idGiaDV="+n.bacSi.id},function(){toastr.error("Thất bại","Thêm bacSi")}):t.put(apiGiaDV+"/"+n.bacSi.id,n.bacSi).then(function(){toastr.success("Thành công","Lưu bacSi")},function(){toastr.error("Thất bại","Lưu bacSi")})};n.SaveAndExit=function(){n.bacSi.id==null?t.post(apiGiaDV,n.bacSi).then(function(t){n.bacSi=angular.copy(t.data);toastr.success("Thành công","Thêm bacSi");i.location.href="/Admin/GiaDV"},function(){toastr.error("Thất bại","Thêm bacSi")}):t.put(apiGiaDV+"/"+n.bacSi.id,n.bacSi).then(function(){toastr.success("Thành công","Lưu bacSi");i.location.href="/Admin/GiaDV"},function(){toastr.error("Thất bại","Lưu bacSi")})};n.SaveAndAdd=function(){n.bacSi.id==null?t.post(apiGiaDV,n.bacSi).then(function(t){t.status==201?(n.bacSi=angular.copy(t.data),toastr.success("Thành công","Thêm bacSi"),i.location.href="/Admin/GiaDV/Modify"):toastr.error("Thất bại","Thêm bacSi")},function(){toastr.error("Thất bại","Thêm bacSi")}):t.put(apiGiaDV+"/"+n.bacSi.id,n.bacSi).then(function(n){n.status==204?(toastr.success("Thành công","Lưu bacSi"),i.location.href="/Admin/GiaDV/Modify"):toastr.error("Thất bại","Lưu bacSi")},function(){toastr.error("Thất bại","Lưu bacSi")})};n.Cancel=function(){i.location.href="/Admin/GiaDV"};n.ChooseImageGiaDV=function(){var t=new CKFinder;t.selectActionFunction=function(t){n.bacSi.image=t;n.$apply()};t.SelectFunction="ShowFileInfo";t.popup()};n.GenAlias=function(){n.bacSi.alias=f.genAlias(n.bacSi.hoTen);console.log(n.bacSi.hoTen)}}]);