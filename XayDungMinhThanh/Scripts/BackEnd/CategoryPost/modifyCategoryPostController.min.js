admin.controller("modifyCategoryPostController",["$scope","$http","$window","$location","$filter","Alias","Url",function(n,t,i,r,u,f,e){function o(){n.categoryPost.id!==null?h(n.categoryPost.id):s()}function s(){n.categoryPost={published:!0,version:1,isService:!1,robots:"Index, Follow",colorBackgroundBanner:"#000000",colorTitleBanner:"#ffffff",colorTextBanner:"#ffffff",timePublished:new Date}}function h(){t.get(apiCategoryPost+"/"+n.categoryPost.id).then(function(t){t.status==200?(n.categoryPost=angular.copy(t.data),n.categoryPost.timePublished=new Date(n.categoryPost.timePublished)):i.location.href="/admin/categorypost"},function(){i.location.href="/admin/categorypost"})}apiCategoryPost="/API/CategoryPostAPI";n.categoryPost={};n.statuses=[{text:"Xuất bản",value:!0},{text:"Không xuất bản",value:!1}];n.isServices=[{text:"Có",value:!0},{text:"Không",value:!1}];n.categoryPost.id=e.getParameterByName("idCategoryPost");o();n.Save=function(){n.categoryPost.id==null?t.post(apiCategoryPost,n.categoryPost).then(function(t){n.categoryPost=angular.copy(t.data);toastr.success("Thành công","Thêm Danh mục Bài viết");i.location.href="/Admin/CategoryPost/Modify?idCategoryPost="+n.categoryPost.id},function(){toastr.error("Thất bại","Thêm Danh mục Bài viết")}):t.put(apiCategoryPost+"/"+n.categoryPost.id,n.categoryPost).then(function(){toastr.success("Thành công","Lưu Danh mục Bài viết")},function(){toastr.error("Thất bại","Lưu Danh mục Bài viết")})};n.SaveAndExit=function(){n.categoryPost.id==null?t.post(apiCategoryPost,n.categoryPost).then(function(t){n.categoryPost=angular.copy(t.data);toastr.success("Thành công","Thêm Danh mục Bài viết");i.location.href="/Admin/CategoryPost"},function(){toastr.error("Thất bại","Thêm Danh mục Bài viết")}):t.put(apiCategoryPost+"/"+n.categoryPost.id,n.categoryPost).then(function(){toastr.success("Thành công","Lưu Danh mục Bài viết");i.location.href="/Admin/CategoryPost"},function(){toastr.error("Thất bại","Lưu Danh mục Bài viết")})};n.SaveAndAdd=function(){n.categoryPost.id==null?t.post(apiCategoryPost,n.categoryPost).then(function(t){n.categoryPost=angular.copy(t.data);toastr.success("Thành công","Thêm Danh mục Bài viết");i.location.href="/Admin/CategoryPost/Modify"},function(){toastr.error("Thất bại","Thêm Danh mục Bài viết")}):t.put(apiCategoryPost+"/"+n.categoryPost.id,n.categoryPost).then(function(){toastr.success("Thành công","Lưu Danh mục Bài viết");i.location.href="/Admin/CategoryPost/Modify"},function(){toastr.error("Thất bại","Lưu Danh mục Bài viết")})};n.Cancel=function(){i.location.href="/Admin/CategoryPost"};n.ChooseImage=function(){var t=new CKFinder;t.selectActionFunction=function(t){n.categoryPost.image=t;n.$apply()};t.SelectFunction="ShowFileInfo";t.popup()};n.ChooseImageBanner=function(){var t=new CKFinder;t.selectActionFunction=function(t){n.categoryPost.imageBanner=t;n.$apply()};t.SelectFunction="ShowFileInfo";t.popup()};n.GenAlias=function(){n.categoryPost.alias=angular.copy(f.genAlias(n.categoryPost.title))}}]);